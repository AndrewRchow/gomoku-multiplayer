(window["webpackJsonpgomoku-multiplayer"]=window["webpackJsonpgomoku-multiplayer"]||[]).push([[0],{39:function(e,t,a){e.exports=a(86)},44:function(e,t,a){},56:function(e,t,a){e.exports={"fade-enter":"app_fade-enter__1W2Qu","fade-enter-active":"app_fade-enter-active__1Xjiz","fade-exit":"app_fade-exit__15hd8","fade-exit-active":"app_fade-exit-active__3jgjR","transition-group":"app_transition-group__19L6v","route-section":"app_route-section__38Uae"}},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),s=(a(44),a(6)),l=a(7),c=a(9),u=a(8),p=a(10),m=a(18),f=a(15),h=r.a.createContext(null),d=function(e){return function(t){return r.a.createElement(h.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))})}},b=h,y=a(21),v=a.n(y),k=(a(45),a(53),a(54),a(55),{apiKey:"AIzaSyCO_RWmCtS4iiq6JmAryC1B7NRfZkymS1A",authDomain:"authentication-template-f0be0.firebaseapp.com",databaseURL:"https://authentication-template-f0be0.firebaseio.com",projectId:"authentication-template-f0be0",storageBucket:"authentication-template-f0be0.appspot.com",messagingSenderId:"249217897473"}),O=function e(){var t=this;Object(s.a)(this,e),this.rooms=function(){return t.db.ref("gomoku/rooms")},this.openRoom=function(){return t.db.ref("gomoku/openRoom")},this.room=function(e){return t.db.ref("gomoku/rooms/".concat(e))},this.gameState=function(e){return t.db.ref("gomoku/rooms/".concat(e,"/gameState"))},v.a.initializeApp(k),this.auth=v.a.auth(),this.db=v.a.database(),this.storage=v.a.storage()},g=(a(56),a(17)),j=a(3),E=(a(79),a(33),r.a.Component,function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderSquare",value:function(e){var t=this;return r.a.createElement(C,{key:e,keyProp:e,value:this.props.squares[e],onClick:function(){return t.props.onClick(e)},winSeq:this.props.winSeq})}},{key:"render",value:function(){for(var e=[],t=[],a=0;a<225;a++)a%15==0&&0!=a&&(e.push(r.a.createElement("div",{className:"board-row",key:a},t)),t=[]),t.push(this.renderSquare(a));return r.a.createElement("div",null,e)}}]),t}(r.a.Component)),C=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=!1;return this.props.winSeq&&(e=this.props.keyProp,a=!!this.props.winSeq.includes(e)),r.a.createElement("button",{className:"square "+(a?"winningSquare":""),onClick:function(){return t.props.onClick()}},this.props.value)}}]),t}(r.a.Component);function S(e){for(var t,a=[],n=[],r=0;r<e.length;r++)r%15==0&&0!=r&&(a.push(n),n=[]),n.push(e[r]);console.log(a);for(r=0;r<a.length;r++)for(var o=0;o<a[r].length;o++)if(a[r][o]&&(t=N(a,r,o)))return console.log(t),t;return""}function N(e,t,a){for(var n,r=e.length+1,o=e[t][a],i=[],s=0;s<5;s++){if(0>a-4||o!=e[t][a-s]){i=[],n=!1;break}i.push(t*r+(a-s)),n=!0}if(!n)for(s=0;s<5;s++){if(0>t-4||o!=e[t-s][a]){i=[],n=!1;break}i.push((t-s)*r+a),n=!0}if(!n)for(s=0;s<5;s++){if(0>a-4||e.length<t+4||o!=e[t+s][a-s]){i=[],n=!1;break}i.push((t+s)*r+(a-s)),n=!0}if(!n)for(s=0;s<5;s++){if(0>a-4||0>t-4||o!=e[t-s][a-s]){i=[],n=!1;break}i.push((t-s)*r+(a-s)),n=!0}return n?{player:o,sequence:i}:""}var w=a(25),q=a(36);a(80);function I(){var e=Object(w.a)(["\n            marginRight: 30px"]);return I=function(){return e},e}var x={squares:Array(225).fill(""),xIsNext:!0,lastClick:226},_=d(function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).searchButton=function(){a.setState({loading:!0},function(){a.props.firebase.openRoom().once("value").then(function(e){if(e.val()){var t=e.val().isOpen,n=e.val().roomId;t?t&&a.props.firebase.room(n).update({playerO:!0,playerOName:a.state.name}).then(function(){a.props.firebase.openRoom().update({isOpen:!1}).then(function(){a.setState({roomId:n,player:"playerO"},function(){a.props.firebase.room().off(),a.props.firebase.room(n).on("value",function(e){a.setState({roomInfo:e.val()})})})})}):a.props.firebase.rooms().push({gameState:x,playerX:!0,playerO:!1,playerXName:a.state.name,playerOName:"",completed:!1,playerDisconnect:!1}).then(function(e){var t=e.key;a.props.firebase.openRoom().update({roomId:t,isOpen:!0}).then(function(){a.setState({roomId:t,player:"playerX"},function(){a.props.firebase.room().off(),a.props.firebase.room(t).on("value",function(e){a.setState({roomInfo:e.val()}),window.addEventListener("beforeunload",a.playerDisconnect)})})})})}})})},a.cancelSearchButton=function(){"playerX"==a.state.player&&a.playerDisconnect(),a.props.firebase.room().off(),a.setState({loading:!1})},a.playerDisconnect=function(){a.props.firebase.openRoom().update({isOpen:!1})},a.handleChange=function(e){a.setState(Object(q.a)({},e.target.name,e.target.value))},a.state={loading:!1,error:"",roomId:"",roomInfo:{},player:"",name:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){console.log([{squares:Array(225).fill(null)}])}},{key:"componentDidUpdate",value:function(){this.state.roomInfo.playerO&&this.props.history.push({pathname:"/multiplayer",state:{roomId:this.state.roomId,player:this.state.player}})}},{key:"componentWillUnmount",value:function(){this.props.firebase.room().off()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.name,n=(e.roomInfo,e.roomId,Object(j.css)(I()));return r.a.createElement("div",null,r.a.createElement("div",{className:"well"},r.a.createElement("h5",null,"Online Search"),r.a.createElement("label",null,"User name:",r.a.createElement("input",{type:"text",value:a,name:"name",onChange:this.handleChange})),r.a.createElement("div",{style:{display:"block"}},r.a.createElement("button",{className:"btn btn-info",style:{display:"inline"},onClick:this.searchButton,disabled:t||!a},"Search for room"),r.a.createElement("div",{className:"sweet-loading",style:{display:"inline"}},r.a.createElement(g.ClipLoader,{sizeUnit:"px",css:n,size:30,color:"#61aceb",loading:t}))),t?r.a.createElement("button",{style:{marginTop:"10px"},onClick:this.cancelSearchButton},"Cancel"):r.a.createElement("div",null)))}}]),t}(r.a.Component));a(81);function D(){var e=Object(w.a)(["\n    display: inline-block;"]);return D=function(){return e},e}var X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).playerDisconnect=function(){a.props.firebase.room(a.state.roomId).update({playerDisconnect:!0}),a.props.firebase.openRoom().update({isOpen:!1})},a.state={squares:Array(225).fill(""),xIsNext:!0,lastClick:"",roomId:a.props.roomId,player:a.props.player,playerDisconnect:!1,myName:"",opponentName:""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("beforeunload",this.playerDisconnect),this.props.firebase.room(this.state.roomId).on("value",function(t){var a=[];Object.keys(t.val().gameState.squares).forEach(function(e){a.push(t.val().gameState.squares[e])}),e.setState({squares:a,xIsNext:t.val().gameState.xIsNext,lastClick:t.val().gameState.lastClick,playerDisconnect:t.val().playerDisconnect,myName:"playerX"==e.state.player?t.val().playerXName:t.val().playerOName,opponentName:"playerX"==e.state.player?t.val().playerOName:t.val().playerXName})})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.playerDisconnect),this.props.firebase.room().off()}},{key:"handleClick",value:function(e,t){if(t){var a=this.state.squares;L(a)||a[e]||(a[e]=this.state.xIsNext?"X":"O",this.props.firebase.gameState(this.state.roomId).update({squares:a,xIsNext:!this.state.xIsNext,lastClick:e}))}}},{key:"render",value:function(){var e=this,t=this.state,a=t.squares,n=t.xIsNext,o=t.lastClick,i=t.player,s=t.playerDisconnect,l=t.myName,c=t.opponentName,u=L(a),p=Object(j.css)(D()),f="",h=!1;return n&&"playerX"==i?(h=!0,f="Your turn (X)"):n||"playerO"!=i?n&&"playerO"==i?(h=!1,f="Other turn (X)"):n||"playerX"!=i||(h=!1,f="Other turn (O)"):(h=!0,f="Your turn (O)"),u&&!h?f="You Win":u&&h&&(f="You Lose"),s&&(f="Opponent disconnected"),r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"game-board"},r.a.createElement("h3",{className:"title"},"Title"),r.a.createElement("div",{className:h?"currentTurnBorder":""},l),r.a.createElement("div",{className:h?"":"currentTurnBorder"},c),u?r.a.createElement("div",{className:h?"loser":"winner"},f):r.a.createElement("div",{className:h?"myTurn":"opponentTurn"},f,r.a.createElement("div",{className:"sweet-loading"},r.a.createElement(g.ClipLoader,{sizeUnit:"px",css:p,size:30,color:"#61aceb",loading:!h}))),s||u?r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-info returnButton"},r.a.createElement(m.b,{to:"/"},"Return"))):r.a.createElement("div",null),r.a.createElement(R,{squares:a,lastClick:o,myTurn:h,onClick:function(t){return e.handleClick(t,h)},winSeq:u.sequence})))}}]),t}(r.a.Component),R=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderSquare",value:function(e){var t=this;return r.a.createElement(B,{key:e,keyProp:e,lastClick:this.props.lastClick,myTurn:this.props.myTurn,value:this.props.squares[e],onClick:function(){return t.props.onClick(e)},winSeq:this.props.winSeq})}},{key:"render",value:function(){for(var e=[],t=[],a=0;a<225;a++)a%15==0&&0!=a&&(e.push(r.a.createElement("div",{className:"board-row",key:a},t)),t=[]),t.push(this.renderSquare(a));return r.a.createElement("div",null,e)}}]),t}(r.a.Component),B=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this,a=!1,n=!1;return this.props.winSeq&&(e=this.props.keyProp,a=!!this.props.winSeq.includes(e)),this.props.lastClick==this.props.keyProp&&(n=!0),r.a.createElement("button",{className:(this.props.myTurn?"square ":"disabledSquare ")+(a?"winningSquare ":"")+(n?"lastClick":""),onClick:function(){return t.props.onClick()}},this.props.value)}}]),t}(r.a.Component),T=d(X);function L(e){for(var t,a=[],n=[],r=0;r<e.length;r++)r%15==0&&0!=r&&(a.push(n),n=[]),n.push(e[r]);for(r=0;r<a.length;r++)for(var o=0;o<a[r].length;o++)if(a[r][o]&&(t=U(a,r,o)))return t;return""}function U(e,t,a){for(var n,r=e.length+1,o=e[t][a],i=[],s=0;s<5;s++){if(0>a-4||o!=e[t][a-s]){i=[],n=!1;break}i.push(t*r+(a-s)),n=!0}if(!n)for(s=0;s<5;s++){if(0>t-4||o!=e[t-s][a]){i=[],n=!1;break}i.push((t-s)*r+a),n=!0}if(!n)for(s=0;s<5;s++){if(0>a-4||e.length<t+4||o!=e[t+s][a-s]){i=[],n=!1;break}i.push((t+s)*r+(a-s)),n=!0}if(!n)for(s=0;s<5;s++){if(0>a-4||0>t-4||o!=e[t-s][a-s]){i=[],n=!1;break}i.push((t-s)*r+(a-s)),n=!0}return n?{player:o,sequence:i}:""}var z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={roomId:a.props.location.state.roomId,player:a.props.location.state.player},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.roomId,a=e.player;return r.a.createElement("div",null,r.a.createElement("h5",null,"Multi"),t?r.a.createElement(T,{roomId:t,player:a}):r.a.createElement("div",null))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:_}),r.a.createElement(f.a,{exact:!0,path:"/multiplayer",component:z})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(b.Provider,{value:new O},r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.b9fc4818.chunk.js.map